---
import AppLayout from "../layouts/AppLayout.astro";
import { InvestmentsList } from "../components/investments/InvestmentsList";
import { requireAuth } from "../lib/auth/helpers";

// Middleware (src/middleware/index.ts) handles primary route protection.
// This is a defense-in-depth check to ensure user is authenticated.
const redirect = requireAuth(Astro.locals.user);
if (redirect) {
  return redirect;
}

const { user } = Astro.locals;
---

<AppLayout title="Inwestycje - DoFIRE">
  <InvestmentsList client:only="react" />
</AppLayout>
